<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Know your device &mdash; flmidi-101  documentation</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Mono"><link rel="stylesheet" href="../_static/typlog.css?v=0.7.3" type="text/css" />
  <link rel="stylesheet" href="../_static/theme.css?v=0.7.3" type="text/css" />
      <link rel="index" title="Index" href="../genindex.html"/>
      <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="flmidi-101  documentation" href="../index.html"/>
      <link rel="next" title="MIDI sniffing on Windows" href="../tutorials/midi/midi_sniffing_win.html"/>
      <link rel="prev" title="Introduction to MIDI" href="introduction_to_midi.html"/>
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create', '');ga('send', 'pageview');</script>
  <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script><meta name="generator" content="sphinx">
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="flmidi-101">
  <meta property="og:title" content="Know your device">
    <meta property="og:description" content="A comprehensive guide for FL Studio MIDI scripting.">
  <meta name="twitter:card" content="summary">
</head>
<body role="document" data-page="getting_started/know_your_device">
  <header class="t-head">
    <div class="t-head_menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M64 384h384v-42.666H64V384zm0-106.666h384v-42.667H64v42.667zM64 128v42.665h384V128H64z"/></svg></div>
    <a class="t-head_logo" href="../index.html"><img src="../_static/icon.svg" alt="Logo"/>flmidi-101
    </a>
  </header>
  <aside class="t-sidebar">
    <div class="t-sidebar_close">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M405 136.798L375.202 107 256 226.202 136.798 107 107 136.798 226.202 256 107 375.202 136.798 405 256 285.798 375.202 405 405 375.202 285.798 256z"/></svg>
    </div>
    <div class="inner">
<a class="logo" href="../index.html"><img src="../_static/icon.svg" alt="Logo"/>
    flmidi-101
</a><div class="logo_desc">A comprehensive guide for FL Studio MIDI scripting.</div>
<div class="github_wrap">
  <a class="github" href="https://github.com/hobyst/flmidi-101" target="_blank">
    <span class="github_icon"></span>
    <span class="github_stars">
      <strong>-</strong>stars
    </span>
    <span class="github_forks">
      <strong>-</strong>forks
    </span>
  </a>
</div><div class="globaltoc">
<p class="caption"><span class="caption-text">Introduction to MIDI Scripting</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Before we get started…</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction_to_midi.html">Introduction to MIDI</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Know your device</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#organize-yourself">Organize yourself</a></li>
<li class="toctree-l2"><a class="reference internal" href="#midi-monitoring">MIDI monitoring</a></li>
<li class="toctree-l2"><a class="reference internal" href="#getting-the-midi-specification-of-your-device">Getting the MIDI specification of your device</a></li>
<li class="toctree-l2"><a class="reference internal" href="#man-in-the-middle">Man in the middle</a></li>
<li class="toctree-l2"><a class="reference internal" href="#looking-at-already-written-code">Looking at already written code</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/midi/midi_sniffing_win.html">MIDI sniffing on Windows</a></li>
</ul>

</div>
<div id="searchbox">
  <form class="search" action="../search.html" method="get">
    <div class="input-group">
      <input type="text" name="q" placeholder="Search" />
      <button type="submit">Go</button>
    </div>
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
    </div>
  </aside>
  <div class="t-content">
    <div class="t-body yue">
      <div class="versionchanged">
        <p>This guide is still under-development.</p>
      </div>
      
  <div class="section" id="know-your-device">
<h1>Know your device<a class="headerlink" href="#know-your-device" title="Permalink to this headline">¶</a></h1>
<p>Now that you know how the MIDI protocol works, before telling FL Studio about your MIDI device you’ll need to know what you have to tell. Your device has it’s own way of communicating with DAW software and you need to know how it interacts with them in order to script for FL Studio. How you do it? Through reverse engineering.</p>
<p>What you need is as much information as possible on how your device works under the hood and which MIDI messages have to be sent to it in order to use its features. An example of this information would be the <a class="reference external" href="https://github.com/Ableton/push-interface/blob/master/doc/AbletonPush2MIDIDisplayInterface.asc">Ableton Push 2 MIDI and Display Interface Manual</a> by Ableton.</p>
<p>This article will guide you through the different techniques you can use to guess how to talk with your MIDI device. However, some exceptions may apply, that if possible, will be documented at the end of this article.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>DO NOT EVER TRY TO DECOMPILE THE PROPRIETARY DRIVER(S) OR SOFTWARE PROVIDED BY THE MANUFACTURER TO KNOW THE MIDI SPECIFICATION OF THE DEVICE.</strong> There’s a high chance you’ll either be doing something that is either illegal (like breaking IP or patent rights) or against some sort of EULA contract from the manufacturer.</p>
</div>
<div class="section" id="organize-yourself">
<h2>Organize yourself<a class="headerlink" href="#organize-yourself" title="Permalink to this headline">¶</a></h2>
<p>When trying to reverse engineer a specification, the best practice is to write down everything you find so when the moment to code arrives, you won’t have to do everything again: just looking at the documentation you wrote should be enough for you to be able to code. Create tables with the different messages you get, write down your thoughts about what you have seen so far… Even the slightest thing might help you to guess everything out.</p>
<ul class="simple">
<li><p>Create tables with the different messages you get and what button you pressed to get it</p></li>
<li><p>Write down your thoughts about what you have seen so far</p></li>
<li><p>With that information, try to find the logic behind those messages based on the features of the device.</p></li>
</ul>
</div>
<div class="section" id="midi-monitoring">
<h2>MIDI monitoring<a class="headerlink" href="#midi-monitoring" title="Permalink to this headline">¶</a></h2>
<p>The easiest aspect to reverse engineer are the messages your device sends when you press a button. Using a MIDI monitoring tool like
<a class="reference external" href="https://www.morson.jp/pocketmidi-webpage">Pocket MIDI</a>, <a class="reference external" href="https://www.snoize.com/MIDIMonitor">MIDI Monitor</a> (macOS only) or
<a class="reference external" href="http://www.midiox.com/http://www.midiox.com">MIDI-OX</a> (Windows only) you will be able to see the different messages your device sends to your DAW.</p>
<ul class="simple">
<li><p><strong>Buttons:</strong> Pressing a button should send a MIDI message to your PC with some sort of differentiating factor between one button and another (normally as different <code class="docutils literal notranslate"><span class="pre">DATA1</span></code> values). You might also get two messages: one for the button press and another one for the button release.</p></li>
<li><p><strong>Knobs:</strong> Using a knob depends on the kind of knob your MIDI device has:</p>
<ul>
<li><p><strong>Absolute knobs:</strong> These ones go from 0 to 127, giving their value depending on their physical position on the controller and forcing synchronization
with the value they control to their physical position. They usually have a spin limit so you can’t spin them indefinitely as the knob will prevent you from doing so, reaching either their maximum or the minimum value.</p></li>
<li><p><strong>Relative knobs:</strong> These act like some sort of button, sending a unique message depending on the direction the user is spinning the knob
(clockwise or counter-clockwise). This allows the knob to modify the value of the parameter it controls using increments rather than force-syncing its value to
match its physical position like absolute knobs do.</p></li>
</ul>
</li>
<li><p><strong>Faders:</strong> Normally act as absolute knobs.</p></li>
</ul>
<p><strong>Your controller doesn’t send any MIDI message at all when you use certain buttons?</strong> Some MIDI controllers have features and buttons locked only to be used with
proprietary software from the manufacturer or the DAWs the controller is officially supported on. Depending on the way these are unlocked, you might be able to trick
your device to think a supported software has been launched so that it unlocks those features. The usual “key” for this is a MIDI or SysEx message the DAW sends to
the device as soon as it gets detected to wake up the device. And in order to get this message, you will need to either spy on the messages your device and a supported
DAW send to each other or look on the internet to find if there’s any public information about it or some piece of code made by other people for other DAWs. Continue
reading to know more about these methods.</p>
</div>
<div class="section" id="getting-the-midi-specification-of-your-device">
<h2>Getting the MIDI specification of your device<a class="headerlink" href="#getting-the-midi-specification-of-your-device" title="Permalink to this headline">¶</a></h2>
<p>If you are having issues figuring out how to work with your device because some stuff isn’t working or you are trying to use a feature that requires sending messages
to the device, then you should look for the MIDI specification of your device: documentation that DAW developers would normally get in order to bring compatibility with
a device for their DAW and specifies how the device should be contacted and used.</p>
<p>Unfortunately, this information isn’t usually available for the public but a Google search might help. If you don’t see anything, you can try looking on forums or
contacting the manufacturer of your device (although it is likely they won’t give it to you).</p>
</div>
<div class="section" id="man-in-the-middle">
<h2>Man in the middle<a class="headerlink" href="#man-in-the-middle" title="Permalink to this headline">¶</a></h2>
<p>A man in the middle approach means you will be hearing the messages being sent to and received from your device when an officially supported DAW is running on your PC by
putting yourself in the middle of both to know what are they saying to each other. There are multiple options depending on your OS, since the methods available to you
depend on how the MIDI protocol is handled internally in your OS.</p>
<div class="section" id="macos">
<h3>macOS<a class="headerlink" href="#macos" title="Permalink to this headline">¶</a></h3>
<p>Between macOS and Windows, macOS it’s the one with the easiest man-in-the-middle method. <a class="reference external" href="https://www.snoize.com/MIDIMonitor">MIDI Monitor</a> has a feature called
“Spy on output to destinations”, that allows the software to monitor any kind of MIDI message, even if you haven’t routed the device to send messages to the MIDI monitor.
This way, if you connect your MIDI device and both an officially supported DAW and MIDI Monitor are running, you will be able to see and record all the messages the DAW
sends to the device as well as any message your device sends back.</p>
<p>Then you can re-send all of the messages the DAW sent to the device to see how the device reacts to them and start to break down the MIDI specification.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Since MIDI Monitor only works with MIDI messages, this monitoring method won’t work with devices that use other protocols such as OSC. For any other protocol
you will either need to use a dedicated monitor utility for it or analyze the raw USB data using something like <a class="reference external" href="https://www.wireshark.org/">Wireshark</a>.</p>
</div>
</div>
<div class="section" id="windows">
<h3>Windows<a class="headerlink" href="#windows" title="Permalink to this headline">¶</a></h3>
<p>On Windows, due to how MIDI is implemented, device assignations are exclusive. This means two software cannot connect to the same MIDI device at the same time.
Trying to do this will result in an error on the 2nd software you are trying to connect saying other software is already using the device so the connection cannot
be done. Because of this, doing man-in-the-middle MIDI sniffing on Windows isn’t possible. At least in theory…</p>
<p>While the MIDI stack on Windows doesn’t allow you to do so, you can go lower: the USB stack. You can monitor the USB messages being sent and received to/from your
device using <a class="reference external" href="https://www.wireshark.org/">Wireshark</a> and <a class="reference external" href="https://desowin.org/usbpcap/">USBPcap</a>. To know about this method, read
<a class="reference internal" href="../tutorials/midi/midi_sniffing_win.html"><span class="doc">MIDI sniffing on Windows</span></a>.</p>
</div>
</div>
<div class="section" id="looking-at-already-written-code">
<h2>Looking at already written code<a class="headerlink" href="#looking-at-already-written-code" title="Permalink to this headline">¶</a></h2>
<p>If nothing of the above worked for you, the only thing left to try is looking at other people’s code that have successfully adapted your MIDI controller to work
with other DAWs. You’ll be on your own doing this and you’ll need to know several programming languages in order to do this. Some of the best pieces of code to look
at are:</p>
<ul>
<li><p><a class="reference external" href="https://github.com/git-moss/DrivenByMoss">DrivenByMoss</a> by Jürgen Moßgraber: Written in Java for Bitwig Studio, it features almost any MIDI controller you can
imagine.</p></li>
<li><p>Ableton <a class="reference external" href="https://github.com/gluon/AbletonLive9_RemoteScripts">Live 9</a> , <a class="reference external" href="https://github.com/gluon/AbletonLive10.1_MIDIRemoteScripts">Live 10</a> and
<a class="reference external" href="https://github.com/gluon/AbletonLive11_MIDIRemoteScripts">Live 11 (beta)</a> MIDI Remote Scripts by Julien Bayle: Written in Python for Ableton Live. These
repositories contain the same Python scripts that bring compatibility with MIDI devices to Ableton Live. Pretty much every controller compatible with Ableton Live
has its sources included on these repositories. As stated by Julien on his website, Robert Henke, one of the co-founders of Ableton and co-developer of Ableton Live
already knows about the ability of users to decompile the scripts (as Python bytecode compilation can be reversed).</p>
<blockquote>
<div><p>Julien Bayle on his <a class="reference external" href="https://structure-void.com/ableton-live-midi-remote-scripts/">website</a>:</p>
<p><em>That means if you followed me correctly that we could create many other kind of features using those scripts and play with the PUSH in MANY other ways.</em>
<em>I have no information about Ableton delivering that officially. But, as Robert Henke said to me one day (the only one) I met him: “we know that you know</em>
<em>those scripts are available, use them”</em></p>
</div></blockquote>
</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>In order to look through the code of these vast repositories properly, either a code editor or an IDE is recommended, as well as Git to be able to clone
the repositories in your PC rather than reading them directly on GitHub.</p>
</div>
</div>
</div>

  <div class="t-pagination clearfix">
    <span>
      ← <a href="introduction_to_midi.html" title="Introduction to MIDI">Introduction to MIDI</a>
    </span>
    <span style="float:right">
      <a href="../tutorials/midi/midi_sniffing_win.html" title="MIDI sniffing on Windows">MIDI sniffing on Windows</a> →
    </span>
  </div>

    </div><footer class="t-foot">
    &copy; Copyright 2020, Hobyst &amp; flmidi-101 contributors.
    <br>
    A <a href="https://typlog.com/">typlog</a> <a href="https://github.com/typlog/sphinx-typlog-theme">sphinx theme</a>,
    designed by <a href="https://lepture.com/">Hsiaoming Yang</a>.
</footer>
  </div>
  <script>$(function(){$(".t-head_menu").on("click",function(){$("body").addClass("_expand")});$(".t-body").on("click",function(){$("body").removeClass("_expand")});$(".t-sidebar_close").on("click",function(){$("body").removeClass("_expand")});$("a.footnote-reference").on("click",function(e){e.preventDefault();var id=$(this).attr("href");var html=$(id).find("td.label + td").html();var w=Math.max(document.documentElement.clientWidth,window.innerWidth||0);var style="top:"+e.pageY+"px;";if(w>560){style+="width:480px;";if(e.pageX>240&&e.pageX+240<w){style+="left:"+(e.pageX-240)+"px;"}else if(e.pageX<=240){style+="left:20px;"}else{style+="right:20px;"}}showFootnote(html,style)});function showFootnote(html,style){var CONTENT_ID="typlog-footnote-content";var content=document.getElementById(CONTENT_ID);if(!content){content=document.createElement("div");content.id=CONTENT_ID;$(".t-body").append(content)}var MASK_ID="typlog-footnote-mask";var mask=document.getElementById(MASK_ID);if(!mask){mask=document.createElement("div");mask.id=MASK_ID;document.body.appendChild(mask);mask.addEventListener("click",function(){content.className="";mask.className=""})}content.innerHTML=html;content.setAttribute("style",style);content.className="_active";mask.className="_active"}function fetchGitHubRepo(repo){var url="https://api.github.com/repos/"+repo;$.getJSON(url,function(data){var counts=[+new Date,data.stargazers_count,data.forks_count];localStorage.setItem("gh:"+repo,JSON.stringify(counts));updateGitHubStats(counts[1],counts[2])})}function updateGitHubStats(stars,forks){$(".github_stars strong").text(stars);$(".github_forks strong").text(forks)}function initGitHub(url){if(!url){return}var repo=url.replace("https://github.com/","");var cache=localStorage.getItem("gh:"+repo);if(cache){try{var counts=JSON.parse(cache);updateGitHubStats(counts[1],counts[2]);var delta=new Date-counts[0];if(delta<0||delta>9e5){fetchGitHubRepo(repo)}}catch(error){fetchGitHubRepo(repo)}}else{fetchGitHubRepo(repo)}}initGitHub($(".github").attr("href"))});</script>
</body>
</html>